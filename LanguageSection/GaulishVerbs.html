<html>
<head>
<style>
.NavHead {
    background-color: lightgray;
    padding: 5px;
}

</style>
</head>
<body>
    <input type="text" id="Decline-Able" value="cor">
    <button type="button" onclick="DeclineFunction()">Decline</button>
    <p>Test Verb Table</p>
	t-preterite <input type="checkbox" id="t-preterite">
	irregular <input type="checkbox" id="irregular">
	
<table style="width: 100%; background: #EEE; border: 1px solid #AAA; font-size: 95%; text-align: center;" class="inflection-table vsSwitcher" data-toggle-category="inflection">
<tr>
<th colspan="8" class="vsToggleElement" style="background: rgb(204, 204, 204); text-align: left; cursor: pointer;">
<div class="NavFrame" style="display:inline-block">
    <div class="NavHead" align="left" style="cursor: pointer;">
    <span class="NavToggle">
        <a id="verbButton" role="button" onclick="DropDownFunction()">less ▲</a>
        </span>Conjugation of <span lang="sy">
    <strong class="CurrentWord">Cariu</strong>
</div>
</th></tr>
<tbody class="NavContent" id="DropDownVerb" style=""><tr>
<tr class="vsHide" style="">
<th colspan="2" rowspan="2" style="background:#c0cfe4">indicative
</th>
<th colspan="3" style="background:#c0cfe4"><i>singular</i>
</th>
<th colspan="3" style="background:#c0cfe4"><i>plural</i>
</th></tr>
<tr class="vsHide" style="">
<th style="background:#c0cfe4;width:12.5%"><p title="first person">first</a>
</th>
<th style="background:#c0cfe4;width:12.5%"><p title="second person">second</a>
</th>
<th style="background:#c0cfe4;width:12.5%"><p title="third person">third</a>
</th>
<th style="background:#c0cfe4;width:12.5%"><p title="first person">first</a>
</th>
<th style="background:#c0cfe4;width:12.5%"><p title="second person">second</a>
</th>
<th style="background:#c0cfe4;width:12.5%"><p title="third person">third</a>
</th></tr>
<tr class="vsHide" style="">
<th rowspan="4" style="background:#c0cfe4">active
</th>
<th style="background:#c0cfe4">present
</th>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
</td>
</tr>
<tr class="vsHide" style="">
<th style="background:#c0cfe4">imperfect
</th>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
</td>
</tr>
<tr class="vsHide" style="">
<th style="background:#c0cfe4">future
</th>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
</td>
</tr>
<tr class="vsHide" style="">
<th style="background:#c0cfe4">preterite
</th>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
</td>
</tr>
<tr class="vsHide" style="">
<th rowspan="4" style="background:#c0cfe4">middle/passive
</th>
<th style="background:#c0cfe4">present
</th>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
</td>
</tr>
<tr class="vsHide" style="">
<th style="background:#c0cfe4">imperfect
</th>
<td><span lang="ga" class=""><p>-</p></span>
<td><span lang="ga" class=""><p>-</p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class=""><p>-</p></span>
<td><span lang="ga" class=""><p>-</p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
</td>
</tr>
<tr class="vsHide" style="">
<th style="background:#c0cfe4">future
</th>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
</td>
</tr>
<tr class="vsHide" style="">
<th style="background:#c0cfe4">preterite
</th>
<td><span lang="ga" class=""><p>-</p></span>
<td><span lang="ga" class=""><p>-</p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class=""><p>-</p></span>
<td><span lang="ga" class=""><p>-</p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
</td>
</tr>
<tr class="vsHide" style="">
<th colspan="2" rowspan="2" style="background:#c0e4c0">subjunctive
</th>
<th colspan="3" style="background:#c0e4c0"><i>singular</i>
</th>
<th colspan="3" style="background:#c0e4c0"><i>plural</i>
</th></tr>
<tr class="vsHide" style="">
<th style="background:#c0e4c0;width:12.5%"><p title="first person">first</a>
</th>
<th style="background:#c0e4c0;width:12.5%"><p title="second person">second</a>
</th>
<th style="background:#c0e4c0;width:12.5%"><p title="third person">third</a>
</th>
<th style="background:#c0e4c0;width:12.5%"><p title="first person">first</a>
</th>
<th style="background:#c0e4c0;width:12.5%"><p title="second person">second</a>
</th>
<th style="background:#c0e4c0;width:12.5%"><p title="third person">third</a>
</th></tr>
<tr class="vsHide" style="">
<th rowspan="1" style="background:#c0e4c0">active
</th>
<th style="background:#c0e4c0">present
</th>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
</td>
</tr>
<tr class="vsHide" style="">
<th rowspan="1" style="background:#c0e4c0">passive
</th>
<th style="background:#c0e4c0">present
</th>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
</td>
</tr>
</tr>
<tr class="vsHide" style="">
<th colspan="2" rowspan="2" style="background:#e4d4c0">Imperative
</th>
<th colspan="3" style="background:#e4d4c0"><i>singular</i>
</th>
<th colspan="3" style="background:#e4d4c0"><i>plural</i>
</th></tr>
<tr class="vsHide" style="">
<th style="background:#e4d4c0;width:12.5%"><p title="first person">first</a>
</th>
<th style="background:#e4d4c0;width:12.5%"><p title="second person">second</a>
</th>
<th style="background:#e4d4c0;width:12.5%"><p title="third person">third</a>
</th>
<th style="background:#e4d4c0;width:12.5%"><p title="first person">first</a>
</th>
<th style="background:#e4d4c0;width:12.5%"><p title="second person">second</a>
</th>
<th style="background:#e4d4c0;width:12.5%"><p title="third person">third</a>
</th></tr>
<tr class="vsHide" style="">
<th rowspan="2" style="background:#e4d4c0">active
</th>
<th style="background:#e4d4c0">present
</th>
<td><span lang="ga" class=""><p>-</p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
</td>
</tr>
<th style="background:#e4d4c0">preterite
</th>
<td><span lang="ga" class=""><p>-</p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class=""><p>-</p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
</td>
<tr>
<th colspan="2" style="background:#e0e0b0">
</th>
<th colspan="3" style="background:#e0e0b0">active
</th>
<th colspan="3" style="background:#e0e0b0">middle/passive
</th></tr>
<tr>
<th rowspan="3"  style="background:#e0e0b0">participle
</th>
<th style="background:#e0e0b0">m
</th>
<td colspan="3" class="Conjugate">
</td>
<td colspan="3" class="Conjugate">
</td></tr>
<tr>
<th style="background:#e0e0b0">f
</th>
<td colspan="3" class="Conjugate">
</td>
<td colspan="3" class="Conjugate">
</td></tr>
<tr>
<th style="background:#e0e0b0">n
</th>
<td colspan="3" class="Conjugate">
</td>
<td colspan="3" class="Conjugate">
</td></tr>
<tr class="vsHide" style="">
<th colspan="2" rowspan="1" style="background:#e0e0b0">gerund
</th>
<td colspan="6"><span lang="ga" class="Conjugate"><p></p></span>
</tr>
</tbody>
<script>
    function DropDownFunction()
    {
        var drop = document.getElementById("DropDownVerb");
        var button = document.getElementById("verbButton");
        console.log(drop.style.getPropertyValue("display"));
        if(drop.style.getPropertyValue("display") == "none")
        {
            drop.style.display = "";
            button.innerHTML = "less ▲";
        }
        else
        {
            drop.style.display = 'none';
            button.innerHTML = "more ▼";
        }
    }
	function DeclineFunction() {
        const endings = [
		"-iou;", "-is;", "-it;", "-omasi;", "-ete;", "-onti",
		"-om;", "-ito;", "-et;", "-omes;", "-etes;", "-ontes",
		"-ssiu;", "-sses;", "-sseti;", "-ssomasi;", "-ssete;", "-ssonti",
		"-an;", "-a;", "-as;", "-mo;", "-te;", "-ar",

		"-ior;", "-itar;", "-itur;", "-omor;", "-edde;", "-ontor",
		"-etio;", "-ontes",
		"-ssior;", "-ssetar;", "-ssetur;", "-ssomor;", "-ssedde;", "-ssontor",
		"-to;", "-tiunts",

		"-su;", "-stes;", "-sta;", "-somas;", "-sete;", "-sont",
		"-sur;", "-ster;", "-star;", "-somor;", "-sede;", "-sontor",

		"-i;", "-etu;", "-omas;", "-ete;", "-ontu",
		"-s;", "-eto;", "-edde;", "-ento;",

		"=-tos;", "=-mnos;", "=-ta;", "=-mna;", "=-ton;", "=-mnon;",
		"$-anna"
		];
		
		const endings_t = [
		"-iou;", "-is;", "-it;", "-omasi;", "-ete;", "-onti",
		"-om;", "-ito;", "-et;", "-omes;", "-etes;", "-ontes",
		"-ssiu;", "-sses;", "-sseti;", "-ssomasi;", "-ssete;", "-ssonti",
		"-an;", "-s;", "-t;", "-me;", "-te;", "-ant",
		
		"-ior;", "-itar;", "-itur;", "-omor;", "-edde;", "-ontor",
		"-etio;", "-ontes",
		"-ssior;", "-ssetar;", "-ssetur;", "-ssomor;", "-ssedde;", "-ssontor",
		"-to;", "-tiunts",

		"-su;", "-stes;", "-sta;", "-somas;", "-sete;", "-sont",
		"-sur;", "-ster;", "-star;", "-somor;", "-sede;", "-sontor",

		"-i;", "-etu;", "-omas;", "-ete;", "-ontu",
		"-s;", "-eto;", "-edde;", "-ento;",

		"=-tos;", "=-mnos;", "=-ta;", "=-mna;", "=-ton;", "=-mnon;",
		"$-anna"
		];

		const endings_i = [
		"-ami;", "-as;", "-at;", "-amasi;", "-ate;", "-anti",
		"-am;", "-asas;", "-ato;", "-ame;", "-ate;", "-ant",
		"-asu;", "-ases;", "-aseti;", "-asomasi;", "-asete;", "-asonti",
		"-an;", "-as;", "-at;", "-ame;", "-te;", "-ar",

		"-ar;", "-atar;", "-atur;", "-amor;", "-adde;", "-antor",
		"-etio;", "-antes",
		"-assior;", "-assetar;", "-assetur;", "-assomor;", "-assedde;", "-assontor",
		"-to;", "-tiunts",

		"-su;", "-stes;", "-sta;", "-somas;", "-sete;", "-sont",
		"-sur;", "-ster;", "-star;", "-somor;", "-sede;", "-sontor",

		"-i;", "-etu;", "-amas;", "-ete;", "-antu",
		"-s;", "-eto;", "-edde;", "-ento;",

		"=-tos;", "=-mnos;", "=-ta;", "=-mna;", "=-ton;", "=-mnon;",
		"$-anna"
		];

        var inputRoot = document.getElementById("Decline-Able").value;
		var swapEndingT = document.getElementById("t-preterite").checked;
		var swapEndingI = document.getElementById("irregular").checked;
		
        var names = document.getElementsByClassName("CurrentWord");
		for(let k = 0; k < names.length; ++k)
        {
            names[k].innerHTML = inputRoot;
        }

		var wordSlots = document.getElementsByClassName("Conjugate");
        var tempRoot = "";
		var deroot = "";
		var rLocation = 0;
		var vowelLocation = 0;
		var boolCheckSandhi = false;
		for(let k = 0; k < wordSlots.length; ++k)
		{
            tempRoot = inputRoot;
			if(swapEndingT)
				selectedEnding = endings_t[k % endings.length];
			else if(swapEndingI)
				selectedEnding = endings_i[k % endings.length];
			else
				selectedEnding = endings[k % endings.length];
            //wordSlots[k].innerHTML = interLoc;
			if(selectedEnding.search(/\=/) != -1)
			{
				deroot = inputRoot.replace(/[bcdfghjklmnpqrstvwxyz]/gi, '');
				endLocation = inputRoot.length-1;
				vowelLocation = inputRoot.search(/[aeiou]/);
				
				boolCheckSandhi = inputRoot[vowelLocation] == 'i' && inputRoot[vowelLocation] == 'a' || inputRoot[endLocation] == 'n' || inputRoot.search(/[cg]/) != -1;
				
				if(endLocation > 0 && vowelLocation != 0 && !boolCheckSandhi) //vowel first
				{
					
					tempRoot = tempRoot.replace(inputRoot[endLocation], "#");
					tempRoot = tempRoot.replace(inputRoot[vowelLocation], inputRoot[endLocation]);
					tempRoot = tempRoot.replace("#", inputRoot[vowelLocation]);
					console.log("Temp Root:" + tempRoot + "," + inputRoot[vowelLocation] + "," + inputRoot[endLocation]);
					//tempRoot = inputRoot.replace(/[aeiou]/gi, '') + inputRoot.replace(/[bcdfghjklmnpqrstvwxyz]/gi, '');
				} else if (inputRoot[endLocation] == 'n')
					tempRoot = inputRoot.substring(0, inputRoot.length - 1);
			}
			
			if(selectedEnding.search(/\$/) != -1)
			{
				
			}
			
            if(selectedEnding.search(/\-/) != -1)
                tempRoot = tempRoot + selectedEnding.split(/[-;]/)[1];
            console.log("temp back:" + selectedEnding.search(/\-/));
			
			//remove illegal combinations
			tempRoot = tempRoot.replace("ae", "ai");
			tempRoot = tempRoot.replace("ao", "aio");
			tempRoot = tempRoot.replace("gs", "x");
			tempRoot = tempRoot.replace("cs", "x");
			tempRoot = tempRoot.replace("cx", "x");
			tempRoot = tempRoot.replace("ct", "xt");
			tempRoot = tempRoot.replace("gt", "xt");
			tempRoot = tempRoot.replace("bss", "biss");
			tempRoot = tempRoot.replace("bs", "bis");
			
			//remove double vowel
			tempRoot = tempRoot.replace("aa", "a");
			//tempRoot = tempRoot.replace("ii", "i");
			tempRoot = tempRoot.replace("oo", "o");
			tempRoot = tempRoot.replace("uu", "u");
			tempRoot = tempRoot.replace("ee", "e");
			
			tempRoot = tempRoot.replace(/(.)(?=.*\2)/g, "");
			
			tempRoot = tempRoot.replace("ssss", "dd");
			tempRoot = tempRoot.replace("sss", "dd");
			tempRoot = tempRoot.replace("dt", "ss");
			tempRoot = tempRoot.replace("st", "ss");
			tempRoot = tempRoot.replace("ds", "dd");
			tempRoot = tempRoot.replace("dds", "dd");
			//tempRoot = tempRoot.replace("nt", "t");
			tempRoot = tempRoot.replace("tt", "t");
			tempRoot = tempRoot.replace("lss", "less");
			
			wordSlots[k].innerHTML = tempRoot;
		}
    }
</script>
</body>
</html>