<html>
<head>
<style>
.NavHead {
    background-color: lightgray;
    padding: 5px;
}

</style>
</head>
<body>
    <input type="text" id="Decline-Able" value="cor">
    <button type="button" onclick="DeclineFunction()">Decline</button>
    <p>Test Verb Table</p>
	t-preterite <input type="checkbox" id="t-preterite">
	s-preterite <input type="checkbox" id="s-preterite">
	u-preterite <input type="checkbox" id="u-preterite">
	u-subjunctive <input type="checkbox" id="u-subjunctive">
	f-stem <input type="checkbox" id="f-stem">
	irregular <input type="checkbox" id="irregular">
	
<table style="width: 100%; background: #EEE; border: 1px solid #AAA; font-size: 95%; text-align: center;" class="inflection-table vsSwitcher" data-toggle-category="inflection">
<tr>
<th colspan="8" class="vsToggleElement" style="background: rgb(204, 204, 204); text-align: left; cursor: pointer;">
<div class="NavFrame" style="display:inline-block">
    <div class="NavHead" align="left" style="cursor: pointer;">
    <span class="NavToggle">
        <a id="verbButton" role="button" onclick="DropDownFunction()">less ▲</a>
        </span>Conjugation of <span lang="sy">
    <strong class="CurrentWord">Cariu</strong>
</div>
</th></tr>
<tbody class="NavContent" id="DropDownVerb" style=""><tr>
<tr class="vsHide" style="">
<th colspan="2" rowspan="2" style="background:#c0cfe4">indicative
</th>
<th colspan="3" style="background:#c0cfe4"><i>singular</i>
</th>
<th colspan="3" style="background:#c0cfe4"><i>plural</i>
</th></tr>
<tr class="vsHide" style="">
<th style="background:#c0cfe4;width:12.5%"><p title="first person">first</a>
</th>
<th style="background:#c0cfe4;width:12.5%"><p title="second person">second</a>
</th>
<th style="background:#c0cfe4;width:12.5%"><p title="third person">third</a>
</th>
<th style="background:#c0cfe4;width:12.5%"><p title="first person">first</a>
</th>
<th style="background:#c0cfe4;width:12.5%"><p title="second person">second</a>
</th>
<th style="background:#c0cfe4;width:12.5%"><p title="third person">third</a>
</th></tr>
<tr class="vsHide" style="">
<th rowspan="4" style="background:#c0cfe4">active
</th>
<th style="background:#c0cfe4">present
</th>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
</td>
</tr>
<tr class="vsHide" style="">
<th style="background:#c0cfe4">imperfect
</th>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
</td>
</tr>
<tr class="vsHide" style="">
<th style="background:#c0cfe4">future
</th>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
</td>
</tr>
<tr class="vsHide" style="">
<th style="background:#c0cfe4">preterite
</th>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
</td>
</tr>
<tr class="vsHide" style="">
<th rowspan="3" style="background:#c0cfe4">middle
</th>
<th style="background:#c0cfe4">present
</th>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
</td>
</tr>
<tr class="vsHide" style="">
<th style="background:#c0cfe4">imperfect
</th>
<td><span lang="ga" class=""><p>-</p></span>
<td><span lang="ga" class=""><p>-</p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class=""><p>-</p></span>
<td><span lang="ga" class=""><p>-</p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
</td>
</tr>
<tr class="vsHide" style="">
<th style="background:#c0cfe4">future
</th>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
</td>
</tr>
<tr class="vsHide" style="">
<th colspan="2" rowspan="2" style="background:#c0e4c0">subjunctive
</th>
<th colspan="3" style="background:#c0e4c0"><i>singular</i>
</th>
<th colspan="3" style="background:#c0e4c0"><i>plural</i>
</th></tr>
<tr class="vsHide" style="">
<th style="background:#c0e4c0;width:12.5%"><p title="first person">first</a>
</th>
<th style="background:#c0e4c0;width:12.5%"><p title="second person">second</a>
</th>
<th style="background:#c0e4c0;width:12.5%"><p title="third person">third</a>
</th>
<th style="background:#c0e4c0;width:12.5%"><p title="first person">first</a>
</th>
<th style="background:#c0e4c0;width:12.5%"><p title="second person">second</a>
</th>
<th style="background:#c0e4c0;width:12.5%"><p title="third person">third</a>
</th></tr>
<tr class="vsHide" style="">
<th rowspan="1" style="background:#c0e4c0">active
</th>
<th style="background:#c0e4c0">present
</th>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
</td>
</tr>
<tr class="vsHide" style="">
<th rowspan="1" style="background:#c0e4c0">middle
</th>
<th style="background:#c0e4c0">present
</th>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
</td>
</tr>
</tr>
<tr class="vsHide" style="">
<th colspan="2" rowspan="2" style="background:#e4d4c0">Imperative
</th>
<th colspan="3" style="background:#e4d4c0"><i>singular</i>
</th>
<th colspan="3" style="background:#e4d4c0"><i>plural</i>
</th></tr>
<tr class="vsHide" style="">
<th style="background:#e4d4c0;width:12.5%"><p title="first person">first</a>
</th>
<th style="background:#e4d4c0;width:12.5%"><p title="second person">second</a>
</th>
<th style="background:#e4d4c0;width:12.5%"><p title="third person">third</a>
</th>
<th style="background:#e4d4c0;width:12.5%"><p title="first person">first</a>
</th>
<th style="background:#e4d4c0;width:12.5%"><p title="second person">second</a>
</th>
<th style="background:#e4d4c0;width:12.5%"><p title="third person">third</a>
</th></tr>
<tr class="vsHide" style="">
<th rowspan="1" style="background:#e4d4c0">active
</th>
<th style="background:#e4d4c0">present
</th>
<td><span lang="ga" class=""><p>-</p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
<td><span lang="ga" class="Conjugate"><p></p></span>
</td>
</tr>
<tr>
<th colspan="2" rowspan="2"  style="background:#e0e0b0">participle
<th colspan="3" style="background:#e0e0b0">active
</th>
<th colspan="3" style="background:#e0e0b0">middle/passive
</th>
</tr>
<tr class="vsHide" style="">
<th style="background:#e0e0b0;width:12.5%"><p title="first person">m</a>
</th>
<th style="background:#e0e0b0;width:12.5%"><p title="second person">f</a>
</th>
<th style="background:#e0e0b0;width:12.5%"><p title="third person">n</a>
</th>
<th style="background:#e0e0b0;width:12.5%"><p title="first person">m</a>
</th>
<th style="background:#e0e0b0;width:12.5%"><p title="third person">f</a>
</th>
<th style="background:#e0e0b0;width:12.5%"><p title="first person">n</a>
</th></tr>
</th>
<tr>
<th colspan="2" style="background:#e0e0b0">Present
</th>
<td colspan="1" class="Conjugate">
</td>
<td colspan="1" class="Conjugate">
</td>
<td colspan="1" class="Conjugate">
</td>
<td colspan="1" class="Conjugate">
</td>
<td colspan="1" class="Conjugate">
</td>
<td colspan="1" class="Conjugate">
</td></tr>
<tr>
<th colspan="2" style="background:#e0e0b0">Past
<td colspan="1" class="Conjugate">
</td>
<td colspan="1" class="Conjugate">
</td>
<td colspan="1" class="Conjugate">
</td>
<td><span lang="ga" class=""><p>-</p></span>
</td>
<td><span lang="ga" class=""><p>-</p></span>
</td>
<td><span lang="ga" class=""><p>-</p></span>
</td></tr>
<tr class="vsHide" style="">
<th colspan="2" rowspan="1" style="background:#e0e0b0">gerund
</th>
<td colspan="6"><span lang="ga" class="Conjugate"><p></p></span></td>
</tr>
</tbody>
<script>
    function DropDownFunction()
    {
        var drop = document.getElementById("DropDownVerb");
        var button = document.getElementById("verbButton");
        console.log(drop.style.getPropertyValue("display"));
        if(drop.style.getPropertyValue("display") == "none")
        {
            drop.style.display = "";
            button.innerHTML = "less ▲";
        }
        else
        {
            drop.style.display = 'none';
            button.innerHTML = "more ▼";
        }
    }
	
	function GetRawStem(input)
	{
		var splitLocation = 0;
		for(var i = 0; i < input.length - 1; ++i)
			if("aeiAEI".indexOf(input[i]) == -1)
			{
				splitLocation = i;
				break;
			}
		return input.substring(splitLocation, input.length);
	}
	
	function DeclineFunction() {
        const endings_regular = [
		"u", "esi", "eti", "omasi", "ete", "onti",
		"ema", "eta", "eto", "emo", "esse", "ento",
		"fassiu", "fassies", "fassieti", "fassiomasi", "fassiete", "fassionti",

		"or", "itar", "itur", "omor", "edde", "ontor",
		"etoi", "ontoi",
		"fassior", "fassitar", "fassitur", "fassiomor", "fassidde", "fassiontor",

		"$asu", "$ases", "$aset", "$asomas", "$asete", "$asont",
		"$asur", "$aster", "$astar", "$asomor", "$asede", "$asontor",

		"i", "etou", "omas", "ete", "ontou",

		"ontos", "onta", "onton", "unos", "una", "unon",
		"tos", "ta", "ton",
		"anna"
		];
		
		const endings = [
		"a", "as", "e", "mo", "te", "ars",
		];
		
		const endings_t = [
		"an", "s", "t", "me", "te", "ant"
		];

		const endings_s = [
		"sam", "s", "st", "sme", "ste", "sant",
		];

		const endings_u = [
		"u", "us", "u", "amo", "ate", "ars",
		];

        var inputRoot = document.getElementById("Decline-Able").value;
		var tpreterite = document.getElementById("t-preterite").checked;
		var spreterite = document.getElementById("s-preterite").checked;
		var upreterite = document.getElementById("u-preterite").checked;
		var usubjunctive = document.getElementById("u-subjunctive").checked;
		var fstem = document.getElementById("f-stem").checked;
		var irregularRoot = document.getElementById("irregular").checked;
		
        var names = document.getElementsByClassName("CurrentWord");
		for(let k = 0; k < names.length; ++k)
        {
            names[k].innerHTML = inputRoot;
        }

		var wordSlots = document.getElementsByClassName("Conjugate");
        var tempRoot = inputRoot;
		var currentEnding = "";
		var splitLocation = 0;
		var endCheck1 = ("aeiouAEIOU".indexOf(tempRoot[tempRoot.length - 1]) != -1);
		var endCheck2 = ("lrLR".indexOf(tempRoot[tempRoot.length - 2]) != -1);
		
		var sandhiCheck = false;
		if(endCheck1)
			sandhiCheck = "gcbGCB".indexOf(tempRoot[tempRoot.length - 2]) != -1;
		else
			sandhiCheck = "gcbGCB".indexOf(tempRoot[tempRoot.length - 1]) != -1;
		
		for(let k = 0; k < wordSlots.length; ++k)
		{
			var toggelSandhi = false;
			var toggelNSandhi = false;
			tempRoot = inputRoot;
			if(irregularRoot && k == 0)
				tempRoot += "mi";
			else if(k >= 18 && k < 24)
			{
				toggelSandhi = true;
				if(endCheck1 || usubjunctive)
				{
					if(tempRoot[tempRoot.length - 1] == 'a')
					{
						tempRoot = tempRoot.replace("iia", "i");
						tempRoot = tempRoot.replace("ina", "i");
					}
					else
						tempRoot = tempRoot.replace("ii", "i");
					tempRoot = tempRoot.substring(0, tempRoot.length - 1);
				}
				if(tpreterite)
					tempRoot += endings_t[k - 18];
				else if(spreterite)
					tempRoot += endings_s[k - 18];
				else if(upreterite)
					tempRoot += endings_u[k - 18];
				else
					tempRoot += endings[k - 18];
				if(fstem) //b color from duplicated f
				{
					tempRoot = "b" + tempRoot;
					tempRoot = tempRoot.replace("arsc", "roc");
				}
			}
			else
			{
				currentEnding = endings_regular[k >= 18 ? k - 6 : k];
				if(currentEnding[0] == '$' || currentEnding[0] == 'f')
				{
					toggelSandhi = true;
					toggelNSandhi = true;
					if(currentEnding[0] == 'f' && fstem)
						tempRoot = "b" + tempRoot;
					if(usubjunctive)
						currentEnding = currentEnding.substring(3, currentEnding.length);
					else if(sandhiCheck)
						currentEnding = currentEnding.substring(2, currentEnding.length);
					else
						currentEnding = currentEnding.substring(1, currentEnding.length);
					if(endCheck1 && sandhiCheck)
						tempRoot = tempRoot.substring(0, tempRoot.length - 1);
				}
				if(endCheck1)
				{
					console.log(currentEnding);
					currentEnding = GetRawStem(currentEnding);
					console.log(currentEnding);
				}
				tempRoot += currentEnding;
			}
			
			if(toggelNSandhi)
			{
				tempRoot = tempRoot.replace("ngs", "x");
				tempRoot = tempRoot.replace("ncs", "x");
			}
			
			if(toggelSandhi || endCheck2 || fstem)
			{
				tempRoot = tempRoot.replace("gs", "x");
				tempRoot = tempRoot.replace("cs", "x");
				tempRoot = tempRoot.replace("bs", "x");
				tempRoot = tempRoot.replace("gt", "xt");
				tempRoot = tempRoot.replace("ct", "xt");
				tempRoot = tempRoot.replace("bt", "xt");
				tempRoot = tempRoot.replace("bm", "bu");
				tempRoot = tempRoot.replace("gm", "gu");
				tempRoot = tempRoot.replace("cm", "cu");
				tempRoot = tempRoot.replace("cx", "x");
				tempRoot = tempRoot.replace("ddss", "ddiss");
				tempRoot = tempRoot.replace("sss", "sis");

				tempRoot = tempRoot.replace("rm", "ru");
				tempRoot = tempRoot.replace("rn", "r");
				tempRoot = tempRoot.replace("lm", "lu");
			}
			
			tempRoot = tempRoot.replace("nm", "nu");
			tempRoot = tempRoot.replace("mn", "un");
			tempRoot = tempRoot.replace("dt", "dd");
			tempRoot = tempRoot.replace("aa", "a");
			tempRoot = tempRoot.replace("ao", "a");
			tempRoot = tempRoot.replace("uu", "u");
			tempRoot = tempRoot.replace("ui", "ii");
			tempRoot = tempRoot.replace("ee", "ei");
			
			wordSlots[k].innerHTML = tempRoot;
		}
    }
</script>
</body>
</html>